<div ng-controller="AuctionsCtrl">
<div class='row-fluid hidden-phone'>
  <div class='span12 divider'></div>
</div>
<div class='row-fluid hidden-phone'>
  <div class='span12'>
    <%= image_tag 'moultonbarnlogo.png' %>
    <div class='pull-right' style='font-size: medium; vertical-align: middle; background-color: mistyrose;'>Auctions are currently being tested. Feel free to bid, and report any problems to
                            dave@themoultons.net,<br /> but be aware that you are not bidding for real! The auctions will
                            start on July 1st.
    </div>
  </div>
</div>
<div class='row-fluid'>
  <div class='span12 divider'><span>{{selectedItem.description}}</span></div>
</div>
<div class='row-fluid'>
  <div id="auction-list-container" class='span2'>
    <ul>
      <li ng-repeat="item in items">
        <h3 ng-click="showItem(item)">{{item.name}}</h3>
      </li>
    </ul>
  </div>
  <div class="span10">

  <div id="auction-view-container" ng-show="selectedItem">

    <form name="form" novalidate class="css-form">

        <div class="row-fluid">
            <div class="span4">
              <h2>Place Your Bid</h2>
              <p>* All fields are required to bid</p>
              <div class="alert alert-success" ng-show="highBidder">
                You are currently the high bidder
              </div>
              <div class="alert alert-error" ng-show="bidError">
                {{biddingError}}
              </div>
                <div class='row-fluid'>
                  <div class="span3">
                    <label>Name *</label>
                    <input type=text ng-model='bid.name' required />
                  </div>
                </div>

                <div class='row-fluid'>
                  <div class="span3">
                    <label>Phone *</label>
                    <input type=tel ng-model='bid.phone' required />
                  </div>
                </div>
                <div class='row-fluid'>
                  <div class="span3">
                    <label>EMail *</label>
                    <input type=email ng-model='bid.email' required />
                  </div>
                </div>
                <div class='row-fluid'>
                  <div class="span9">
                    <label>Are you attending in July? *</label>
                    Yes <input type=radio name='attending' value='yes' ng-model="bid.attending" />
                    No <input type=radio name='attending' value='no' ng-model="bid.attending" />
                  </div>
                </div>
                <hr />
                <div class='row-fluid '>
                  <div class="span8">
                    <label>Your Bid * ( at least {{min_bid | currency}} )</label>
                    <input width='span3' type=number ng-min="{{min_bid}}" ng-model='bid.amount' required />
                  </div>
                </div>
              <div class='row-fluid'>
                <div class="span5">
                  Save Info?
                  <input type=checkbox value="yes" ng-model="saveInfo" />
                </div>
              </div>
                  <p>
                    <p><a href="#myModal" data-toggle="modal">*Read the Terms of Payment before bidding.*</a></p>
                    <button class="btn btn-primary" ng-click="placeBid()" ng-disabled="form.$invalid || isUnchanged(bid)">Bid</button>
                    <button class="btn" ng-click="resetForm()" >Clear</button>
                  </p>

              <span ng-show="form.amount.$error.float">This is not a valid price</span>
            </div>
            <div class="span8">
              <h2>Current High Bid: ${{selectedItem.max_bid}}</h2>
              <p>Number of Bids: {{selectedItem.num_bids}}</p>

              <div id="myCarousel" class="carousel slide">
                <!-- Carousel items -->
                <div class="carousel-inner">
                  <div class="item active">
                    <img ng-src="{{firstImage}}"/>
                  </div>
                  <div class="item" ng-repeat='url in images'>
                    <img ng-src="{{url}}"/>
                  </div>
                </div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
              </div>

            </div>
        </div>

    </form>
    <div>Please note that <strong>shipping is not included in the price</strong>. If you are not present on July 20th, you will need to
    make arrangements to pick your item up, or pay to have it shipped. Payment in full is required before taking possession.</div>
  </div>
  </div>
</div>
<div class='row-fluid hidden-phone'>
  <div class='span12 footer'>
    <hr />
    Auction Website by <a href="http://about.me/dmoulton" target="_about">David Moulton</a> |
    <a href="http://themoultonbarn.com">Return to themoultonbarn.com</a>
  </div>
</div>
</div>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Terms of Payment</h3>
  </div>
  <div class="modal-body">
    <p>If you are present at the Centennial celebration on July 20 and you have won an auction, you will have the option
      of paying for your item by check or Paypal. We ask that if at all possible you pay by Paypal. Payment must occur
      the day of the celebration so that you can take possession of your item. If you are present at the celebration, but
      wish to ship your item, you must make your own arrangements to do so, and at your own expense.
    </p>
    <p>If you are not present, the only payment method you will be able to use is Paypal. You must pay
      before July 24, 2013. If you have not paid, the item will be awarded to the next largest bid. Your item will not
      be shipped until after payment is received. Shipping is not included in the winning bid. You must pay shipping costs,
      or arrange to have your item picked up.</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>